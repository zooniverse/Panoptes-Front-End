// talk default css rules
TALK_BACKGROUND = #f7f7f7
TALK_BORDER = #F2F1F1
TALK_BORDER_RADIUS = 6px
TALK_PADDING = 5px
TALK_MARGIN = 10px auto
TALK_BREAKPOINT = 670px

COPY_GREY_DARK = #404040
COPY_GREY_MID = #898989
COPY_GREY_LIGHT = #afaeae

.talk-module // shared styles among talk box shaped things
  background: TALK_BACKGROUND
  border-radius: TALK_BORDER_RADIUS
  border: 2px solid TALK_BORDER
  padding: TALK_PADDING
  margin: TALK_MARGIN
  box-sizing: border-box
  color: COPY

.talk-text-input // shared styles among talk text inputs
  border: none

.talk-left-buttons
  margin: 2px 2px 2px 0

.talk-page-header
  font-weight: 100
  text-align: center

.talk-form
  input[type='text'], textarea
    border: none
    font-size: 1.0em
    font-family: inherit
    display: block

.talk-search-form
  position: relative
  max-width: 250px
  overflow: auto
  margin-bottom: 10px

  input[type='text']
    float: left
    width: 80%
    border: 2px solid TALK_BACKGROUND
    border-right: none
    font-style: italic
    height: 100%
    line-height: 28px
    padding-left: 5px
    border-radius: TALK_BORDER_RADIUS 0 0 TALK_BORDER_RADIUS

  button[type='submit']
    position: absolute
    background: TALK_BACKGROUND
    width: 20%
    color: COPY
    height: 100%
    border-left: none
    border-color: TALK_BACKGROUND
    border-radius: 0 TALK_BORDER_RADIUS TALK_BORDER_RADIUS 0
    &:hover
      background: MAIN_HIGHLIGHT

.polaroid-image
  background: #fff
  padding: 10px 10px 20px 10px
  margin: 10px

.talk
  @extend .talk-form
  color: COPY_GREY_DARK

  *
    box-sizing: border-box

  a
    color: COBOLT_BLUE

  button
    @extend .standard-button
    @extend .talk-module
    padding: 0.2em 0.4em
    font-size: 0.8em
    margin: 0

    &:hover
      color: white
      border-color: MAIN_HIGHLIGHT

  select
    border: 2px solid LIGHT_GREY
    background: #fff
    border-radius: TALK_BORDER_RADIUS
    font-size: 0.8em
    padding: 0.2em

  .talk-list-content
    display: flex
    section
      width: 100%
    @media screen and (max-width: TALK_BREAKPOINT)
      display: block

  .talk-sidebar
    @extend .talk-module
    width: 300px
    margin: 10px 0 10px 10px

    @media screen and (max-width: TALK_BREAKPOINT)
      margin: 0
      width: 100%

  .talk-moderation
    margin-bottom: 10px

    > button
      color: COPY_GREY_LIGHT
      background: transparent

      &:hover
        color: white
        background: lighten(orangered, 10%)
        border-color: orangered

    .talk-moderation-children
      p
        margin: 0

      input[type='text']
        width: 50%
        display: block

      textarea
        width: 100%

      button
        margin: 5px 0 10px 0

      &.closed
        overflow: hidden
        max-height: 0
      &.open
        @extend .talk-module
        margin-bottom: 10px
        border-left: 4px solid orangered

      .talk-sticky-list
        ul
          list-style: none
          margin: 0
          padding: 0

          li
            display: block
            padding: 5px
            cursor: move
            cursor: -webkit-grab
            cursor: -moz-grab
            cursor: grab

            &:before
              margin: 0 5px 0 0

            &.talk-sticky-placeholder
              background: MAIN_HIGHLIGHT
              color: white

  .talk-board
    .talk-page-header
      text-align: left

  .talk-board-new-discussion
    @extend .talk-module
    padding: 0px
    input, h2
      margin: TALK_PADDING
    input[type='text']
      border: none
      width: 50%

  .talk-board-discussions
    width: 80%
    float: left

  .talk-board-preview
    @extend .talk-module
    overflow: auto
    h1 a
      color: COPY
      text-decoration: none
      &:hover
        color: MAIN_HIGHLIGHT
    p
      margin: 0 0 5px 0
      color: COPY_GREY_MID

  .preview-content
    width: 80%
    float: left
  .preview-stats
    width: 20%
    float: left
    margin-top: 5px
    p i
      width: 1em
      text-align: center

  .talk-discussion-link
    color: COPY_GREY_LIGHT
    a:nth-child(1)
      color: black
      text-decoration: none
      &:hover
        color: MAIN_HIGHLIGHT
    .avatar
      height: 2em
      vertical-align: -0.5em

  .talk-subject-display
    @extend .talk-module
    @extend .polaroid-image

    display: inline-block
    text-align: center
    background: white

    img
      max-width: 300px

    p
      margin: 0
      font-size: 0.8em

    h1
      font-size: 2.5em

  .talk-discussion-preview
    @extend .talk-module
    position: relative
    background: transparent
    border-radius: 0
    border: none
    border-top: 1px solid LIGHT_GREY
    overflow: auto

    .talk-sticky-pin
      color: #FF4642
      margin: 0 10px 0 0
      font-weight: 600

    &:last-child
      border-bottom: 1px solid LIGHT_GREY

    h1
      font-weight: 100
      font-size: 1.25em
      a
        text-decoration: none
        &:hover
          text-decoration: underline
    p
      margin: 0
    .talk-discussion-preview-author
      font-size: 0.7em
      margin-top: 0.3em

  .talk-discussion
    max-width: 960px
    margin: 0 auto

    .talk-comment-box
      width: 80%

  .talk-comment
    overflow: auto

    &.active
      .talk-comment-body
        background-color: gold

    .talk-comment-preview-content
      blockquote
        opacity: 0.5
    .subject-container
      max-width: 100%
      img
        max-width: 100%
    .subject-tools
      span > button
        margin-right: 2px

  .talk-comment-author
    @extend .talk-module
    text-align: center
    background: transparent
    border: none
    color: grey
    float: left
    width: 20%

    p
      word-wrap: break-word
      width: 60%
      margin: 0 auto 2px auto
      line-height: 1em

    .avatar
      border-radius: 50%
      height: 50px

    .user-mention-name
      color: COPY_GREY_LIGHT
      font-size: 0.8em

    .project-role
      font-size: 0.5em

  .talk-comment-body
    width: 80%
    float: left
    @extend .talk-module

    .talk-comment-date
      margin: 0
      font-size: 0.6em

    .talk-comment-report-form
      button
        display: block

    .talk-comment-links
      button:not(:last-child)
        @extend .talk-left-buttons

      .talk-comment-like-button i.upvoted
        color: MAIN_HIGHLIGHT

  .talk-comment-feedback
    color: green
    text-decoration: italic

  .talk-comment-box
    @extend .talk-module
    width: 100%
    overflow: auto

    .talk-comment-focus-image
      float: left
      max-width: 150px

    .talk-comment-form
      float: left
      width: 100%

      textarea
        @extend .talk-text-input
        width: 100%
        height: 150px

      section button
        &.active
          opacity: 0.5
        &:not(:last-child)
          @extend .talk-left-buttons

        &[type='submit']:hover
          background-color: SUCCESS
          border-color: darken(SUCCESS, 10%)

    .talk-comment-buttons-container
      display: block
      float: left
      width: 100%

      button:not(:last-child)
        @extend .talk-left-buttons

    .talk-comment-children
      float: left
      width: 100%

    .talk-comment-image-selector
      .talk-comment-suggested-images
        overflow-x: scroll
        overflow-y: hidden
        white-space: nowrap

      .talk-comment-image-item
        @extend .polaroid-image
        position: relative
        display: inline-block

        img
          max-width: 300px
          display: inline-block
          vertical-align: top

        .image-card-select
          position: absolute
          text-align: center
          top: 0
          left: 0
          right: 0
          bottom: 0

          button
            opacity: 0
            position: absolute
            transform: translate(-50%, -50%)
            transition: opacity .25s
            top: 50%

          &:hover
            background: rgba(255,255,255,0.5)
            button
              opacity: 1

  .talk-edit-discussion-form
    .toggle-sticky
      display: block
      font-weight: bold
      margin: 10px 0

  .talk-search-result
    background: rgba(TALK_BACKGROUND, 0.5)
    margin: TALK_MARGIN
    padding: TALK_PADDING
