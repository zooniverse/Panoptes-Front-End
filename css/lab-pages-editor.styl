$grey1 = #A6A7A9
$grey2 = #808080
$grey3 = #5C5C5C
$grey4 = #979797
$grey5 = #E2E5E9
$grey6 = #EFF2F5
$black = #000000
$teal = #00979D
$greenBright = #1ED359
$redBright = #E45950
$yellow = #F0B200
$white = #FFFFFF
$backdropColour = #80808080
$shadowColour = #00000080

$sizeXS = 4px
$sizeS = 8px
$sizeSM = 12px
$sizeM = 16px
$sizeL = 24px
$sizeXL = 32px
$sizeXXL = 64px

$fontFamilies = Karla, Arial, sans-serif

$fontSizeXS = 10px
$fontSizeS = 14px
$fontSizeM = 16px
$fontSizeL = 18px
$fontSizeXL = 24px

$fontWeightBold = 600
$fontWeightBoldPlus = 700

// Container
// Affects everything outside the pages editor
// -----------------------------------------------------------------------------
.columns-container.content-container.pages-editor-container
  margin: 0

// Pages Editor
// -----------------------------------------------------------------------------
.lab-pages-editor
  accent-color: $teal
  box-sizing: border-box
  color: $black
  font-family: $fontFamilies
  font-size: $fontSizeM
  max-width: 840px
  margin: 0 auto
  padding: $sizeM $sizeM

  // General UI
  // ---------------------------------------------------------------------------
  *
    box-sizing: border-box
  
  a
    color: $black
    text-decoration: none

  input
  textarea
    font-family: $fontFamilies
    font-size: $fontSizeM
  
  input[type=text], input[type=number]
    border: 1.5px solid $grey1
    color: $black
    padding: $sizeS
  
  input[type=radio], input[type=checkbox]
    flex: 0 0 auto
    width: $fontSizeM
    height: $fontSizeM
  
  textarea
    border: 1.5px solid $grey1
    padding: $sizeS
  
  select
    border: 1.5px solid $grey1
    color: $black
    font-size: $fontSizeM
    padding: $sizeS
  
  button
    border-radius: $sizeXS
    color: $black
    cursor: pointer
    font-family: $fontFamilies

    &.big
      border: none
      box-shadow: 1px 1px 4px 0px #00000040
      font-size: $fontSizeS
      padding: $sizeSM
    
    &.primary
      background: $yellow
    
    &.plain
      background: none
      border: none
  
  a.button-link
    border: 1px solid $yellow
    border-radius: $sizeXS
    color: $black
    cursor: pointer
    display: inline-block
    font-family: $fontFamilies
    font-size: $fontSizeS
    line-height: 1em
    padding: $sizeSM
    text-align: center

  hr
    border-top: 1px solid $grey2
  
  .disabled, .disabled *
    color: $grey1
  
  .decoration-plus
    &::after
      content: ' +'
  
  .status-banner
    display: flex
    flex-direction: column
    justify-content: center
    align-items: center
    padding: 0.5em

    &.error
      background: $redBright
      color: $white

  // General Layout
  // ---------------------------------------------------------------------------

  .flex-row
    align-items: center
    display: flex
    flex-direction: row
    gap: $sizeS
  
  .flex-wrap
    flex-wrap: wrap
  
  .small-width
    width: 60px

  .flex-item
    flex: 1 1 auto
  
  .align-start
    align-items: flex-start

  .justify-around
    justify-content: space-around
  
  .spacing-bottom-XS
    margin-bottom: $sizeXS
  
  .spacing-bottom-M
    margin-bottom: $sizeM

  // Component: Workflow Header
  // ---------------------------------------------------------------------------

  .workflow-header
    border-bottom: 0.5px solid $grey1

    a
      display: inline-block
      font-size: $fontSizeS
      text-decoration: none

      .icon
        margin-right: $sizeS

    button
      background: none
      border: none
      cursor: pointer
      font-size: $fontSizeL
      font-weight: $fontWeightBoldPlus
      text-transform: uppercase

      &[aria-selected=true]
        border-bottom: 4px solid $teal
      
      &[aria-selected=false]
        color: $grey1
        border-bottom: 4px solid transparent

  // Component: Workflow Settings Page
  // ---------------------------------------------------------------------------

  .workflow-settings-page
    display: grid
    gap: $sizeM
    grid-template-columns: auto auto
    grid-template-rows: auto auto
    margin-top: $sizeS

    // Workflow Title
    label[for=display_name]
      display: block
      font-size: $fontSizeL
      font-weight: $fontWeightBoldPlus
      grid-column: 1 / span 2
      grid-row: 1
      text-transform: uppercase

      input
        border-radius: $sizeXS
        display: block
        font-size: $fontSizeL
        margin-top: $sizeXS
        width: 100%
    
    // Group of Config Options/Controls
    fieldset
      border: none
      margin-bottom: $sizeM
      padding: 0

      legend
        font-weight: $fontWeightBold
        font-size: $fontSizeL
        padding: 0
        text-transform: uppercase
      
      p
        font-size: $fontSizeS
      
      .small-info
        font-size: $fontSizeS
        font-style: italic

    .col-1
      grid-column: 1
      grid-row: 2

    .col-2
      grid-column: 2
      grid-row: 2
    
    ul.input-group
      list-style: none
      padding: 0
      margin: 0

      li
        display: flex
        flex-direction: row
        gap: $sizeXS
        margin: $sizeXS 0
        padding: 0

        input[type=checkbox]
          margin: $sizeXS

  // Component: Tasks Page
  // ---------------------------------------------------------------------------

  .tasks-page

    .workflow-title
      border-bottom: 1.5px solid $grey1
      margin-bottom: $sizeS
      margin-top: $sizeM

      h2
        color: $grey3
        font-size: $fontSizeXL
        font-weight: $fontWeightBoldPlus
        text-transform: uppercase
      
      .workflow-id
        color: $grey4
        font-size: $fontSizeS

      .status-active, .status-inactive
        font-size: $fontSizeS
        margin-left: $sizeS
        text-transform: uppercase

      .status-active
        color: $greenBright

      .status-inactive
        color: $redBright
    
    dialog
      border: 1px solid $grey1
      border-radius: $sizeS
      box-shadow: 1px 1px 6px 0px $shadowColour
      padding: 0
      width: 800px
      max-width: 90vw

      &::backdrop
        background: $backdropColour
      
      button.big
        border: 3px solid $grey1
        font-size: $fontSizeM
        padding: $sizeS $sizeXL
        text-transform: uppercase
      
      .dialog-header
        background: $teal
        color: $white
        padding: $sizeXS $sizeM
        text-transform: uppercase

        button
          color: $white
      
      &.new-task
        .dialog-body
          padding: $sizeS $sizeL
          background: $grey5

          button.new-task-button
            align-items: center
            display: flex
            flex-direction: column
            justify-content: center
            margin-bottom: $sizeM
            margin-right: $sizeM
            height: $sizeXXL
            width: $sizeXXL

            &:last-child
              margin-right: 0

            .fa
              font-size: $fontSizeXL
        
      &.edit-step
        background: $white
      
        .dialog-body
          padding: $sizeS $sizeL
      
        .edit-task-form
          // Yup, the form is actually a fieldset, so maybe strip out the default values
          padding: 0
          margin: 0
          border: none

          legend
            display: none  // TODO: reconsider design

          .input-row
            margin-bottom: $sizeSM
          
          label.big, span.big
            display: block
            font-weight: $fontWeightBold
            font-size: $fontSizeL
            margin-bottom: $sizeS
            text-transform: uppercase
          
          label.narrow, span.narrow
            > *
              vertical-align: middle

          input[type=text]
          input[type=checkbox]
          textarea
            box-shadow: 1px 1px 4px 0px #00000040 inset
          
          input[type=text]
          textarea
            background: $grey6
            border-radius: $sizeXS
            color: $black
            padding: $sizeS $sizeM
            width: 100%
          
          textarea
            min-height: 8em
          
          .single-question-task
            ul
              list-style: none
              margin: 0
              padding: 0
            
            li
              margin: $sizeSM 0
              padding: 0
        
      .dialog-footer
        padding: $sizeXS $sizeL $sizeL $sizeL

    section
      h3
        color: $black
        font-size: $fontSizeL
        font-weight: $fontWeightBold
        margin: 0
        text-transform: uppercase
    
    .steps-list
      list-style: none
      margin: $sizeS 0 0 0
      padding: 0

    .step-item
      .step-body
        background: $grey5
        border: 1px solid $grey1
        border-radius: $sizeXS
        padding: $sizeS $sizeM

        &:active
        &:has(.move-button:focus)  // Note: :has() is experimental as of Nov 2023, and not supported on Firefox
          outline: 2px solid $yellow

      .step-controls
        cursor: grab

        &:active
          cursor: grabbing
        
        .move-button:focus
          outline: 1px solid $yellow
        
        .step-controls-left
          min-width: 5rem
        
        .step-controls-center
          margin: auto

          > *
            vertical-align: middle
            color: $grey1
        
        .step-controls-right
          text-align: right
          min-width: 5rem

          button
            background: $white
            border: 1px solid $yellow
            border-radius: $sizeS
            margin-left: $sizeXS

            .fa
              color: $grey3
            
            &.disabled
              background: $grey2

      .step-drop-target
        padding: $sizeS

        &.active
          background: $greenBright
          padding: $sizeL $sizeS

    .tasks-list
      list-style: none
      padding: 0
    
    .task-item
      .task-text
        font-size: $fontSizeS
        font-weight: $fontWeightBold
      
    .grab-handle
      cursor: grab

      &:active
        cursor: grabbing
    
    ul.branching-controls
      display: flex
      flex-direction: row
      flex-wrap: wrap
      justify-content: center
      list-style: none
      margin: 0
      padding: 0
      
      li
        display: flex
        flex-direction: column
        margin: 0 $sizeM $sizeL $sizeM
        padding: 0
      
      .fake-button
        background: $white
        border: 1px solid $grey1
        border-radius: 2px
        color: $black
        font-family: $fontFamilies
        font-size: $fontSizeXS
        padding: $sizeS $sizeM
        text-align: center
      
      .next-arrow
        color: $yellow
        display: block
        margin: 0 auto
      
      select
        background: $yellow
        border-radius: $sizeM
        border: 2px solid $grey1
        font-size: $fontSizeXS

        &.next-is-submit
          background: $white
          border: 2px solid $yellow
  
  .task-key
  .step-key
    background: $grey3
    border-radius: $sizeM
    color: $white
    font-size: $fontSizeXS
    padding: 0 $sizeS

.debug-0
  width: 6em

.debug-1
  background: #f0c0c0
  margin: auto

.debug-2
  background: #c0f0f0
  text-align: right
  width: 6em
